apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: homelab-base-chart
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/JonasHess/homelab-base-chart.git
    targetRevision: HEAD
    path: .
    helm:
      valuesObject:
        domain: "zimmermann.lat"
        akeyless:
          path: "/zimmermann.lat"
        cloudflare:
          email: "mi.zimmermann@web.de"
        letsencrypt:
          email: "michael@zimmermann.lat"
        homeassistant:
          volumes:
            config: "/mnt/tank1/unencrypted/apps/homeassistant/config"
        traefik:
          volumes:
            data: "/mnt/tank1/unencrypted/apps/traefik/data"
          loadBalancerIP: "192.168.0.80"
        traefik_forward_auth:
          # https://cognito-idp.eu-central-1.amazonaws.com/eu-central-1_t9DQfKlSX/.well-known/openid-configuration
          oidc_issuer_url: "https://cognito-idp.eu-central-1.amazonaws.com/eu-central-1_A6gtz8gw5"
          oidc_client_id: "5vmqlfbdhdrma83s40bnrbb59i"
  destination:
    namespace: default
    server: https://kubernetes.default.svc
  syncPolicy:
    automated: {}