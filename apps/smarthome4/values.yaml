generic:
  appName: smarthome4
  externalSecrets:
    smarthome4-secret:
      - HOMEASSISTANT_APITOKEN: "/smarthome4/HOMEASSISTANT_APITOKEN"
      - MQTT_BROKER_USERNAME: "/smarthome4/MQTT_BROKER_USERNAME"
      - MQTT_BROKER_PASSWORD: "/smarthome4/MQTT_BROKER_PASSWORD"
  deployment:
    image: 629099703604.dkr.ecr.eu-central-1.amazonaws.com/hess.pm/smarthome4:v0.0.14
    imagePullPolicy: Always
    ports:
    - containerPort: 8080
    envFrom:
      configMapRef: smarthome4-config-map
      secretRef: smarthome4-secret
    configMapMounts:
      config:
        mountPath: /config
        configMapName: smarthome4-app-config
    livenessProbe:
      httpGet:
        path: /actuator/health
        port: 8080
      initialDelaySeconds: 60
      periodSeconds: 30
      timeoutSeconds: 10
    readinessProbe:
      httpGet:
        path: /actuator/health
        port: 8080
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 10
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"
    imagePullSecrets:
    - regcred-primary
  service:
    ports:
    - name: http
      port: 8080

# Spring configuration
profilesActive: prod

# MQTT configuration
mqtt:
  host: mosquitto-service
  port: "1883"

# Home Assistant configuration
homeAssistant:
  baseUrl: http://homeassistant-service:8123
  cache:
    maxAgeMs: "300000"

# Device state configuration
device:
  stateTimeoutSeconds: "300"

# Application model refresh configuration
applicationModel:
  refresh:
    enabled: "true"
    intervalMs: "300000"
    initialDelayMs: "60000"

# External configuration chart (deployed as separate ArgoCD Application)
externalConfig:
  repoURL: ""
  targetRevision: "main"
  path: ""
  configMapName: "smarthome4-app-config"
