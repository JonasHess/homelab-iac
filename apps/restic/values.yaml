cronjob:
  enabled: true
  schedule: "0 2 * * *"  # Daily at 2 AM
  image: restic/restic:latest
  command: ["/bin/bash", "/scripts/backup-script.sh"]
  restartPolicy: OnFailure
  configMapMounts:
    backup-script:
      name: restic-backup-script
      mountPath: /scripts
    backup-paths:
      name: restic-backup-paths
      mountPath: /config
  pvcMounts: []
#    tank0:
#      hostPath: /mnt/tank0
#      mountPath: /mnt/tank0
#    tank1:
#      hostPath: /mnt/tank1
#      mountPath: /mnt/tank1
  envFrom:
    secretRef: restic-secret
  env:
    - name: RESTIC_REPOSITORY
      value: "s3:$(ENDPOINT)/$(BUCKET)"
    - name: AWS_ACCESS_KEY_ID
      value: "$(ACCESS_KEY_ID)"
    - name: AWS_SECRET_ACCESS_KEY
      value: "$(SECRET_ACCESS_KEY)"

generic:
  externalSecrets:
    restic-secret:
      - ACCESS_KEY_ID: /restic/S3_ACCESS_KEY_ID  # Access key for any S3-compatible provider
      - SECRET_ACCESS_KEY: /restic/S3_SECRET_ACCESS_KEY  # Secret key for any S3-compatible provider
      - BUCKET: /restic/S3_BUCKET  # Bucket name for any S3-compatible provider
      - ENDPOINT: /restic/S3_ENDPOINT  # S3-compatible storage endpoint URL
      - REGION: /restic/S3_REGION  # Region (optional for some providers)
      - RESTIC_PASSWORD: /restic/RESTIC_PASSWORD