cronjob:
  enabled: true
  schedule: "0 2 * * *"  # Daily at 2 AM
  image: restic/restic:latest
  command: ["/bin/sh", "/scripts/backup-script.sh"]
  restartPolicy: OnFailure
  configMapMounts:
    backup-script:
      name: restic-backup-script
      mountPath: /scripts
    backup-paths:
      name: restic-backup-paths
      mountPath: /config
  pvcMounts: []
#    tank0:
#      mountPath: /mnt/tank0
#    tank1:
#      mountPath: /mnt/tank1
  envFrom:
    secretRef: restic-secret
  env:
    - name: RESTIC_REPOSITORY
      value: "s3:$(ENDPOINT)/$(BUCKET)"
    - name: AWS_ACCESS_KEY_ID
      value: "$(ACCESS_KEY_ID)"
    - name: AWS_SECRET_ACCESS_KEY
      value: "$(SECRET_ACCESS_KEY)"

generic:
  persistentVolumeClaims:
    tank1: ~ # /mnt/somewhere/unencrypted/apps/traefik/data
  externalSecrets:
    restic-secret:
      # For Backblaze B2: Use your B2 Application Key ID from B2 console > App Keys
      - ACCESS_KEY_ID: /restic/S3_ACCESS_KEY_ID  # Access key for any S3-compatible provider
      # For Backblaze B2: Use your B2 Application Key (secret) from B2 console > App Keys  
      - SECRET_ACCESS_KEY: /restic/S3_SECRET_ACCESS_KEY  # Secret key for any S3-compatible provider
      # For Backblaze B2: Your B2 bucket name created in B2 console
      - BUCKET: /restic/S3_BUCKET  # Bucket name for any S3-compatible provider
      # For Backblaze B2: s3.{region}.backblazeb2.com (e.g. s3.us-west-000.backblazeb2.com)
      - ENDPOINT: /restic/S3_ENDPOINT  # S3-compatible storage endpoint URL
      # For Backblaze B2: Your B2 bucket region (e.g. us-west-000, eu-central-003)
      - REGION: /restic/S3_REGION  # Region (optional for some providers)
      # Choose a strong password for restic backup encryption (NOT your B2 password)
      - RESTIC_PASSWORD: /restic/RESTIC_PASSWORD